<div th:fragment="formMedicoFragment" class="card shadow-sm p-4">
    <h4 class="mb-4 text-primary" th:text="${isEdit} ? 'Editar Médico' : 'Registrar Nuevo Médico'"></h4>
    <div th:if="${mensaje}" class="alert alert-warning" th:text="${mensaje}"></div>
    <form id="form-medico"
          th:action="@{${isEdit} ? '/Admin/EditarMedico' : '/Admin/CrearMedico'}"
          method="post"
          onsubmit="enviarFormularioParcial(event, 'form-medico')"
          th:object="${medico}">

        <input type="hidden" th:field="*{id}" />
        <input type="hidden" th:field="*{usuarioId}" />

        <div class="mb-3">
            <label for="nombre" class="form-label">Nombre completo</label>
            <input type="text" th:field="*{nombre}" class="form-control" required />
            <div class="text-danger" th:if="${#fields.hasErrors('nombre')}" th:errors="*{nombre}"></div>
        </div>

        <div class="mb-3">
            <label for="especialidad" class="form-label">Especialidad</label>
            <input type="text" th:field="*{especialidad}" class="form-control" />
            <div class="text-danger" th:if="${#fields.hasErrors('especialidad')}" th:errors="*{especialidad}"></div>
        </div>

        <div class="mb-3">
            <label for="telefono" class="form-label">Teléfono</label>
            <input type="text" th:field="*{telefono}" class="form-control" />
            <div class="text-danger" th:if="${#fields.hasErrors('telefono')}" th:errors="*{telefono}"></div>
        </div>

        <div class="mb-3">
            <label for="email" class="form-label">Correo electrónico</label>
            <input type="email" th:field="*{email}" class="form-control" required />
            <div class="text-danger" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
        </div>

        <hr />
        <h5 class="text-secondary mb-3">Datos de Usuario</h5>

        <div class="mb-3">
            <label for="username" class="form-label">Nombre de Usuario</label>
            <input type="text" th:field="*{username}" class="form-control" required />
            <div class="text-danger" th:if="${#fields.hasErrors('username')}" th:errors="*{username}"></div>
        </div>

        <div class="mb-3">
            <label for="password" class="form-label">Contraseña</label>
            <input type="password" th:field="*{password}" class="form-control" required />
            <div class="text-danger" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></div>
        </div>

        <div class="d-flex justify-content-end gap-2">
            <button type="submit" class="btn btn-primary"
                    th:text="${isEdit} ? 'Guardar Cambios' : 'Registrar'">
            </button>

            <button type="button" class="btn btn-secondary" onclick="cargarVista('Admin', 'Medicos')">Cancelar</button>
        </div>
    </form>
</div>
